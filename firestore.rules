  rules_version = '2';
  service cloud.firestore {
    match /databases/{database}/documents {

      // Make sure the uid of the requesting user matches name of the user
      // document. The wildcard expression {id} makes the id variable available in rules.
      match /users/{id} {
        allow read, update, delete: if request.auth != null && request.auth.uid == id;
        allow create: if request.auth != null;
      }

      // Allow the user to access documents in the "abandonedPlaces" collection
      // only if they are authenticated.
      match /abandonedPlaces/{abandonedPlace} {
        allow read, write: if request.auth != null;

        match /comments/{commentID} {
          allow read, write: if request.auth != null

          match /replyComments/{commentID} {
          	allow read, write: if request.auth != null
        }
      }
    }
  }
}